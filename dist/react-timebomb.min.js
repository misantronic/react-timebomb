!function(e){e.f[0]=function(t,n){Object.defineProperty(n,"__esModule",{value:!0});const a=e.r("tslib");var o,r,s;const i=e.r("lodash-decorators"),d=e.r("react"),l=e.r("styled-components"),c=e.r("react-slct"),u=e.r(1),p=e.r(4),m=e.r(5),h=e.r(2),f=e.r(6);n.ReactTimebombProps=f.ReactTimebombProps,n.ReactTimebombState=f.ReactTimebombState,n.ReactTimebombError=f.ReactTimebombError;const g="YYYY-MM-DD",y=l.default.div`
    width: 100%;
    position: relative;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    position: relative;
`,_=l.default.div`
    display: flex;
    width: 100%;
    flex-direction: column;
    border: 1px solid #ccc;
    box-sizing: border-box;
    padding: 0;
    background: white;
    z-index: 1;
    max-height: ${e=>e.menuHeight}px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
`,b=l.default.input`
    position: absolute;
    opacity: 0;
`;class v extends d.Component{constructor(e){super(e);const{value:t,format:n=g}=this.props;this.state={allowValidation:!1,mode:"month",valueText:t?h.dateFormat(t,n):void 0,date:t||h.startOfDay(new Date)}}static getDerivedStateFromProps(e){return{showTime:Boolean(e.format&&/H|h|m|k|a|S|s/.test(e.format))}}componentDidUpdate(e,t){const{valueText:n}=this.state,{value:a,format:o=g}=this.props;e.format!==o&&this.setState({valueText:a?h.dateFormat(a,o):void 0}),t.valueText!==n&&this.valueTextDidUpdate()}valueTextDidUpdate(){const{valueText:e,allowValidation:t}=this.state,{format:n=g}=this.props,a=h.validateDate(e,n);a?this.setState({allowValidation:!0},()=>{h.isDisabled(a,this.props)?this.emitError("outOfRange",e):this.setState({date:a},()=>this.emitChange(a))}):e?this.emitError("invalidDate",e):!h.isUndefined(e)&&t&&this.emitChange(void 0)}render(){const{value:e,placeholder:t,menuWidth:n,showConfirm:a,showCalendarWeek:o,selectWeek:r,format:s=g}=this.props,{showTime:i,valueText:l,allowValidation:f,mode:v}=this.state,x=this.props.minDate?h.startOfDay(this.props.minDate):void 0,D=this.props.maxDate?h.endOfDay(this.props.maxDate):void 0;return d.createElement(c.Select,{value:e,placeholder:t},({placeholder:t,open:c,onToggle:h,onRef:g,MenuContainer:T})=>d.createElement(y,{ref:g,className:"react-timebomb"},c?d.createElement(T,{menuWidth:n,menuHeight:300},d.createElement(_,{menuHeight:300},d.createElement(p.MenuTitle,{mode:v,date:this.state.date,minDate:x,maxDate:D,onMonths:this.onModeMonths,onYear:this.onModeYear,onNextMonth:this.onNextMonth,onPrevMonth:this.onPrevMonth,onToday:this.onToday}),d.createElement(u.Menu,{showTime:i,showConfirm:a,showCalendarWeek:o,selectWeek:r,date:this.state.date,value:e,valueText:l,format:s,mode:v,minDate:x,maxDate:D,onSelectDay:this.onSelectDay,onSelectMonth:this.onSelectMonth,onSelectYear:this.onSelectYear,onSelectTime:this.onSelectTime,onToggle:h,onSubmit:this.onValueSubmit}))):d.createElement(d.Fragment,null,this.onClose(),d.createElement(b,{type:"text",onFocus:h})),d.createElement(m.Value,{placeholder:c?void 0:t,format:s,value:e,valueText:l,minDate:x,maxDate:D,allowValidation:f,open:c,onChangeValueText:this.onChangeValueText,onToggle:h,onSubmit:this.onValueSubmit})))}onClose(){return h.clearSelection(),setTimeout(()=>{const{format:e=g}=this.props,t=h.validateDate(this.state.valueText,e);if(!(t?!h.isDisabled(t,this.props):t)&&this.props.value){const t=h.dateFormat(this.props.value,e);this.state.valueText!==t&&this.setState({valueText:t})}},0),null}emitError(e,t){this.props.onError&&this.state.allowValidation&&this.props.onError(e,t)}emitChange(e){const{value:t}=this.props;t&&e&&t.getTime()===e.getTime()||(this.props.onChange(e),this.setState({allowValidation:Boolean(e)}))}onChangeValueText(e){this.setState({valueText:e})}onValueSubmit(e){e(),h.clearSelection()}onSelectDay(e){const{value:t,format:n=g}=this.props;let a=new Date(e);t&&(a=h.setDate(e,t.getHours(),t.getMinutes()));const o=h.dateFormat(a,n);this.setState({date:a,valueText:o},()=>this.emitChange(a))}onModeYear(){this.setState({mode:"year"})}onModeMonths(){this.setState({mode:"months"})}onSelectMonth(e){this.setState({date:e,mode:"month"})}onSelectYear(e){this.setState({date:e,mode:"months"})}onToday(){const e=h.startOfDay(new Date);this.setState({date:e})}onNextMonth(){const e=new Date(this.state.date);e.setMonth(e.getMonth()+1),this.setState({date:e})}onPrevMonth(){const e=new Date(this.state.date);e.setMonth(e.getMonth()-1),this.setState({date:e})}onSelectTime(e){const{format:t=g}=this.props,n=this.props.value||new Date("1970-01-01");if(e){const a=e.split(":"),o=h.setDate(n,parseInt(a[0],10),parseInt(a[1],10)),r=h.dateFormat(o,t);this.setState({valueText:r},()=>this.emitChange(o))}else this.emitChange(h.startOfDay(n))}}a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],v.prototype,"onChangeValueText",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Function]),a.__metadata("design:returntype",void 0)],v.prototype,"onValueSubmit",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(o="undefined"!=typeof Date&&Date)?o:Object]),a.__metadata("design:returntype",void 0)],v.prototype,"onSelectDay",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],v.prototype,"onModeYear",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],v.prototype,"onModeMonths",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(r="undefined"!=typeof Date&&Date)?r:Object]),a.__metadata("design:returntype",void 0)],v.prototype,"onSelectMonth",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(s="undefined"!=typeof Date&&Date)?s:Object]),a.__metadata("design:returntype",void 0)],v.prototype,"onSelectYear",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],v.prototype,"onToday",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],v.prototype,"onNextMonth",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],v.prototype,"onPrevMonth",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],v.prototype,"onSelectTime",null),n.ReactTimebomb=v},e.f[1]=function(t,n){Object.defineProperty(n,"__esModule",{value:!0});const a=e.r("tslib");var o,r,s;const i=e.r("lodash-decorators"),d=e.r("react"),l=e.r("styled-components"),c=e.r(2),u=e.r(3),p=l.default.div`
    display: flex;
    align-items: center;
`,m=l.default.div`
    display: flex;
    flex: 1;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-around;
    align-items: center;
    padding: 10px;

    button {
        width: 33%;
        font-size: 16px;
        font-weight: normal;
        font-style: normal;
        font-stretch: normal;
        line-height: 3.13;
        border: none;
        margin: 0;
        padding: 0;
    }
`,h=l.default.div`
    padding: 0 0 10px;
`,f=l.default.div`
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    border-left: solid 1px #e6e6e6;
    padding: 10px;
    flex: 0 0 90px;

    button {
        width: 100%;
        font-size: 16px;
        font-weight: normal;
        font-style: normal;
        font-stretch: normal;
        border: none;
        padding: 6px 0;
        margin: 0 0 4px;
        min-height: 46px;
    }
`,g=l.default.div`
    width: 100%;
    text-align: center;
    padding: 10px 0 0;

    button {
        padding: 3px 28px;
    }
`,y=l.default.table`
    width: 100%;
    font-size: 13px;
    user-select: none;
    padding: 0 10px;
    box-sizing: border-box;

    td.calendar-week {
        color: #aaa;
    }

    th.calendar-week {
        text-align: left;
        color: #aaa;
    }

    tr {
        ${e=>e.selectWeek?l.css`
                      &:hover {
                          cursor: pointer;

                          td.day {
                              background-color: #eee;
                          }
                      }
                  `:""};

        th {
            padding: 3px 2px;
        }
    }
`,_=l.default(p)`
    padding: 8px 2px;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    color: ${e=>e.current?"#000":"#aaa"};
    background-color: ${e=>e.selected?"#ddd":e.today?"rgba(172, 206, 247, 0.4)":"transparent"};
    font-weight: ${e=>e.selected?"bold":"normal"};
    pointer-events: ${e=>e.disabled?"none":"auto"};
    user-select: none;
    opacity: ${e=>e.disabled?.3:1};

    &:hover {
        background-color: ${e=>e.selected?"#ddd":"#eee"};
    }
`;class b extends d.PureComponent{get now(){return new Date}get monthMatrix(){const{date:e}=this.props,t=e.getMonth(),n=e.getFullYear(),a=[];let o=c.startOfMonth(e),r=0;for(;c.startOfWeek(o).getMonth()===t||c.endOfWeek(o).getMonth()===t;){const e=c.startOfWeek(new Date(n,t,7*r+++1));a.push([e,c.addDays(e,1),c.addDays(e,2),c.addDays(e,3),c.addDays(e,4),c.addDays(e,5),c.addDays(e,6)]),o=c.addDays(o,7)}return a}render(){const{mode:e,showConfirm:t}=this.props;switch(e){case"year":case"months":return d.createElement("div",{style:{display:"flex"}},this.renderMenuMonths(),this.renderMenuYear());case"month":return d.createElement(h,null,this.renderMonth(),t&&this.renderConfirm())}}renderMenuYear(){const{date:e}=this.props,t=this.now.getFullYear(),n=e.getFullYear();return d.createElement(f,{className:"years"},Array(100).fill(void 0).map((a,o)=>{const r=new Date(e);r.setFullYear(t-o);const s=c.isDisabled(c.endOfYear(r),this.props),i=n===r.getFullYear();return d.createElement(u.Button,{key:o,tabIndex:-1,className:i?"selected":void 0,selected:i,disabled:s,"data-date":r.toString(),onClick:this.onSelectYear},t-o)}))}renderMenuMonths(){const{date:e,value:t}=this.props,n=c.getMonthNames(!0),a=t&&t.getMonth(),o=t&&t.getFullYear();return d.createElement(m,{className:"months"},n.map((t,n)=>{const r=new Date(e);r.setMonth(n);const s=c.isDisabled(r,this.props),i=a===r.getMonth()&&o===r.getFullYear();return d.createElement(u.Button,{key:t,tabIndex:-1,className:i?"selected":void 0,selected:i,disabled:s,"data-date":r.toString(),onClick:this.onSelectMonth},t)}))}renderMonth(){const{monthMatrix:e}=this,{showCalendarWeek:t,selectWeek:n}=this.props;return d.createElement(y,{className:"month",selectWeek:n,cellSpacing:0,cellPadding:0},d.createElement("thead",null,d.createElement("tr",null,t&&d.createElement("th",{className:"calendar-week"}),d.createElement("th",null,"Mo"),d.createElement("th",null,"Di"),d.createElement("th",null,"Mi"),d.createElement("th",null,"Do"),d.createElement("th",null,"Fr"),d.createElement("th",null,"Sa"),d.createElement("th",null,"So"))),d.createElement("tbody",null,e.map((e,n)=>d.createElement("tr",{key:n},t&&d.createElement("td",{className:"calendar-week"},c.getWeekOfYear(e[0])),e.map((e,t)=>d.createElement("td",{className:"day",key:t},this.renderDay(e)))))))}renderDay(e){const t=e.getDate(),{value:n,date:a,selectWeek:o}=this.props;let r=n&&e.getDate()===n.getDate()&&e.getMonth()===n.getMonth();const s=e.getMonth()===a.getMonth(),i=c.isDisabled(e,this.props),l=c.isToday(e);return o&&n&&(r=c.getWeekOfYear(n)===c.getWeekOfYear(e)),d.createElement(_,{"data-date":e.toString(),className:r?"value selected":"value",selected:r,current:s,disabled:i,today:l,onClick:this.onSelectDay},t)}renderConfirm(){const{valueText:e,format:t}=this.props,n=c.validateDate(e,t);return d.createElement(g,null,d.createElement(u.Button,{tabIndex:-1,disabled:null===n,onClick:()=>this.props.onSubmit(this.props.onToggle)},"Ok"))}onSelectDay(e){const t=new Date(e.currentTarget.getAttribute("data-date"));this.props.onSelectDay(t)}onSelectMonth(e){const t=new Date(e.currentTarget.getAttribute("data-date"));setTimeout(()=>this.props.onSelectMonth(t),0)}onSelectYear(e){const t=new Date(e.currentTarget.getAttribute("data-date"));setTimeout(()=>this.props.onSelectYear(t),0)}}a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(o=void 0!==d&&d.SyntheticEvent)?o:Object]),a.__metadata("design:returntype",void 0)],b.prototype,"onSelectDay",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(r=void 0!==d&&d.MouseEvent)?r:Object]),a.__metadata("design:returntype",void 0)],b.prototype,"onSelectMonth",null),a.__decorate([i.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(s=void 0!==d&&d.MouseEvent)?s:Object]),a.__metadata("design:returntype",void 0)],b.prototype,"onSelectYear",null),n.Menu=b},e.f[2]=function(t,n){Object.defineProperty(n,"__esModule",{value:!0});const a=e.r("moment"),o=e.r("moment"),r=a.default||o,s=/[.|:|-|\\|_|\s]/;function i(e,t){return r(e).format(t)}function d(e){return/d/i.test(e)?"day":/M/.test(e)?"month":/y/i.test(e)?"year":/h/i.test(e)?"hour":/m/.test(e)?"minute":/s/.test(e)?"second":void 0}function l(e){const t=new Date(e);return t.setHours(0,0,0,0),t}function c(e){const t=new Date(e);return t.setHours(23,59,59,999),t}function u(e,t){return r(e).add(t,"days").toDate()}function p(e,t){return r(e).subtract(t,"days").toDate()}n.dateFormat=i,n.validateDate=function(e,t){const n=r(e,t,!0);return n.isValid()?n.toDate():null},n.getFormatType=d,n.validateFormatGroup=function(e,t){if(isFinite(e)){const n="string"==typeof e?parseInt(e,10):e,a=String(e),o=a.length;switch(d(t)){case"day":if(1===o)return n>=0&&n<=3||`0${e}`;if(2===o&&n>=1&&n<=31)return!0;break;case"month":if(1===o)return 0===n||1===n||`0${e}`;if(2===o&&n>=0&&n<=12)return!0;break;case"year":if(1===o&&(1===n||2===n))return!0;if(o>=2&&(a.startsWith("19")||a.startsWith("20")))return!0;break;case"hour":if(1===o)return n>=0&&n<=2||`0${e}`;if(o>=2&&n>=0&&n<=24)return!0;break;case"minute":case"second":if(1===o)return n>=0&&n<=5||`0${e}`;if(o>=2&&n>=0&&n<=59)return!0}}return!1},n.stringFromCharCode=function(e){const t=e-48*Math.floor(e/48);return String.fromCharCode(96<=e?t:e)},n.formatNumber=function(e){return e<=1?"01":e<=9?`0${e}`:String(e)},n.splitDate=function(e,t){return i(e,t).split(s)},n.joinDates=function(e,t){const n=e.map(e=>e instanceof HTMLElement?e.innerText:e).filter(e=>e),a=t.split(s);if(n.length!==a.length)return"";const o=n.join(" "),i=a.join(" "),d=r(o,i),l=d.parsingFlags();switch(l.overflow){case 2:return r(new Date(...l.parsedDateParts)).format(t)}return d.format(t)},n.clearSelection=function(){const e=getSelection();e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges()},n.getWeekOfYear=function(e){return r(e).isoWeek()},n.startOfWeek=function(e){return r(e).startOf("isoWeek").toDate()},n.endOfWeek=function(e){return r(e).endOf("isoWeek").toDate()},n.startOfDay=l,n.endOfDay=c,n.endOfYear=function(e){return r(e).endOf("year").toDate()},n.addDays=u,n.subtractDays=p,n.manipulateDate=function(e,t,n){switch(t){case"day":if("add"===n)return u(e,1);if("subtract"===n)return p(e,1);break;case"month":if("add"===n)return function(e,t){return r(e).add(t,"months").toDate()}(e,1);if("subtract"===n)return function(e,t){return r(e).subtract(t,"months").toDate()}(e,1);break;case"year":if("add"===n)return function(e,t){return r(e).add(t,"years").toDate()}(e,1);if("subtract"===n)return function(e,t){return r(e).subtract(t,"years").toDate()}(e,1);break;case"hour":if("add"===n)return function(e,t){return r(e).add(t,"hours").toDate()}(e,1);if("subtract"===n)return function(e,t){return r(e).subtract(t,"hours").toDate()}(e,1);break;case"minute":if("add"===n)return function(e,t){return r(e).add(t,"minutes").toDate()}(e,1);if("subtract"===n)return function(e,t){return r(e).subtract(t,"minutes").toDate()}(e,1);break;case"second":if("add"===n)return function(e,t){return r(e).add(t,"seconds").toDate()}(e,1);if("subtract"===n)return function(e,t){return r(e).subtract(t,"seconds").toDate()}(e,1)}return new Date},n.startOfMonth=function(e){const t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0),t},n.endOfMonth=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},n.isUndefined=function(e){return null==e},n.setDate=function(e,t,n){const a=new Date(e);return a.setHours(t,n),a},n.isToday=function(e){return r(e).isSame(new Date,"day")},n.getMonthNames=function(e){return e?r.monthsShort():r.months()},n.isDisabled=function(e,{minDate:t,maxDate:n}){return t&&e<l(t)||n&&e>=c(n)},n.getAttribute=function(e,t){return e.getAttribute(t)},n.keys={ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,ARROW_LEFT:37,ENTER:13,TAB:9,ESC:27,BACKSPACE:8,DELETE:46,SPACE:32,SHIFT:16,A:65}},e.f[3]=function(t,n){Object.defineProperty(n,"__esModule",{value:!0});const a=e.r("styled-components");n.Button=a.default.button`
    margin-right: 5px;
    border: 1px solid #ccc;
    border-radius: 3px;
    padding: 3px 6px;
    min-height: 21px;
    box-sizing: border-box;
    background: ${e=>e.selected?"#ccc":"#fff"};

    &:focus {
        outline: none;
    }

    &:disabled {
        cursor: not-allowed;
    }

    &:not(:disabled) {
        cursor: pointer;
    }

    &:not(:disabled):hover {
        background-color: ${e=>e.selected?"#ccc":"#efefef"};
    }

    &:last-child {
        margin-right: 0;
    }
`},e.f[4]=function(t,n){Object.defineProperty(n,"__esModule",{value:!0});const a=e.r("react"),o=e.r("styled-components"),r=e.r(3),s=e.r(2),i=o.default.div`
    display: ${e=>e.show?"flex":"none"};
    align-items: center;
    width: 100%;
    padding: 10px 10px 15px;
    justify-content: space-between;
    min-height: 21px;
    box-sizing: border-box;
`;n.MenuTitle=class extends a.PureComponent{get prevDisabled(){const{minDate:e,date:t}=this.props;return!!e&&s.subtractDays(s.startOfMonth(t),1)<e}get nextDisabled(){const{maxDate:e,date:t}=this.props;return!!e&&s.addDays(s.endOfMonth(t),1)>e}render(){const{date:e,mode:t,onNextMonth:n,onPrevMonth:o,onMonths:d,onYear:l}=this.props,c=s.getMonthNames(!0),u="month"===t;return a.createElement(i,{show:u},a.createElement(r.Button,{tabIndex:-1,disabled:this.prevDisabled,onClick:o},"◀"),a.createElement("div",null,a.createElement(r.Button,{tabIndex:-1,onClick:d},a.createElement("b",null,c[e.getMonth()])),a.createElement(r.Button,{tabIndex:-1,onClick:l},e.getFullYear())),a.createElement(r.Button,{tabIndex:-1,disabled:this.nextDisabled,onClick:n},"▶"))}}},e.f[5]=function(t,n){Object.defineProperty(n,"__esModule",{value:!0});const a=e.r("tslib");var o,r,s,i,d,l,c,u;const p=e.r("lodash-decorators"),m=e.r("react"),h=e.r("styled-components"),f=e.r(2),g=h.default.div`
    display: flex;
    align-items: center;
`,y=h.default(g)`
    justify-content: space-between;
    align-items: center;
    padding: 5px 10px;
    border: 1px solid #ccc;
    cursor: pointer;
`,_=h.default.span`
    padding: 2px 0 2px 0;
    min-width: 1px;
    cursor: text;

    &:focus {
        outline: none;
    }

    &:last-of-type {
        padding: 2px 10px 2px 0;
    }

    &:not(:last-of-type):after {
        content: attr(data-separator);
        width: 4px;
        display: inline-block;
    }

    &:empty:before {
        content: attr(data-placeholder);
        color: #aaa;
    }

    &:empty:not(:last-of-type):after {
        color: #aaa;
    }
`,b=h.default.button`
    font-size: 13px;
    color: #ccc;
    cursor: pointer;
    border: none;
    line-height: 1;

    &:hover {
        color: #333;
    }

    &:focus {
        outline: none;
    }
`,v=h.default(b)`
    font-size: 18px;
`,x=h.default.span`
    color: #aaa;
    user-select: none;
`,D=h.default.span`
    margin-right: 5px;
    user-select: none;

    &:after {
        content: '📅';
    }
`,T=[f.keys.BACKSPACE,f.keys.DELETE,f.keys.TAB];class S extends m.PureComponent{constructor(){super(...arguments),this.searchInputs=[]}get formatGroups(){return this.props.format.split("").reduce((e,t)=>{const n=e[e.length-1];return n&&t===n.substr(0,1)?e[e.length-1]+=t:e=[...e,t],e},[])}get focused(){return document.querySelector(":focus")}componentDidUpdate(e){const{open:t,value:n,format:a}=this.props;if(!this.searchInputs.some(e=>e===this.focused)){if(e.value!==n&&n){const e=f.splitDate(n,a),t=this.searchInputs[0];this.searchInputs.forEach((t,n)=>t.innerText=e[n]),t&&t.focus()}if(t&&!e.open||n!==e.value){const e=this.searchInputs[0];e&&(""===e.innerText?e.focus():this.selectText(e))}}if(!t&&n){const e=f.splitDate(n,a);this.searchInputs.forEach((t,n)=>t.innerText=e[n])}}render(){const{placeholder:e,value:t,open:n}=this.props,a=e&&!n;return m.createElement(y,{"data-role":"value",className:"react-slct-value react-timebomb-value",onClick:this.onToggle},m.createElement(g,null,m.createElement(D,{className:"react-timebomb-icon"}),m.createElement(g,null,this.renderValue(),a&&m.createElement(x,{className:"react-timebomb-placeholder"},e))),m.createElement(g,null,t&&m.createElement(v,{className:"react-timebomb-clearer",tabIndex:-1,onClick:this.onClear},"×"),m.createElement(b,{tabIndex:-1,className:"react-timebomb-arrow"},n?"▲":"▼")))}renderValue(){const{open:e,value:t}=this.props;if(!e&&!t)return null;const{formatGroups:n}=this;return m.createElement(g,null,n.map((e,t)=>{if("."===e||":"===e||" "===e)return null;{const a=n[t+1];return m.createElement(_,{contentEditable:!0,"data-placeholder":e,"data-separator":a,key:e,"data-group":e,ref:this.onSearchRef,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onFocus:this.onFocus,onClick:this.onFocus,onChange:this.onChange})}}))}selectText(e){if(e){const t=document.createRange(),n=getSelection();t.selectNodeContents(e),n.removeAllRanges(),n.addRange(t)}}onSearchRef(e){e?this.searchInputs.push(e):this.searchInputs=[]}onKeyDown(e){const{onChangeValueText:t,format:n,value:a,allowValidation:o}=this.props,r=e.currentTarget,{innerText:s,nextSibling:i,previousSibling:d}=r,l=getSelection(),c=Boolean(l.focusOffset-l.baseOffset);let u=parseInt(s,10);switch(e.keyCode){case f.keys.ENTER:case f.keys.ESC:return void e.preventDefault();case f.keys.ARROW_RIGHT:return e.preventDefault(),void(i instanceof HTMLSpanElement?i.focus():this.selectText(r));case f.keys.ARROW_LEFT:return e.preventDefault(),void(d instanceof HTMLSpanElement?d.focus():this.selectText(r));case f.keys.ARROW_UP:case f.keys.ARROW_DOWN:e.preventDefault();const s=e.keyCode===f.keys.ARROW_UP;if(isNaN(u)&&(u=0),isFinite(u)){const e=f.getAttribute(r,"data-group"),i=f.getFormatType(e);if(o){if(a&&i){const e=s?"add":"subtract",t=f.manipulateDate(a,i,e);if(!f.isDisabled(t,this.props)){const e=f.splitDate(t,n);this.searchInputs.map((t,n)=>t.innerText=e[n])}}}else{const t=u+(s?1:-1),n=f.validateFormatGroup(t,e);n&&(r.innerText="string"==typeof n?n:f.formatNumber(t))}this.selectText(r),t(f.joinDates(this.searchInputs,n))}return}const p=f.getAttribute(r,"data-value"),m=f.getAttribute(r,"data-group"),h=f.stringFromCharCode(e.keyCode),g=p&&!c?p+h:h;if(T.includes(e.keyCode)||e.metaKey||e.ctrlKey)return;const y=f.validateFormatGroup(g,m);y?"string"==typeof y&&(e.preventDefault(),r.innerText=y):e.preventDefault(),c||s.length>=m.length&&e.preventDefault()}onKeyUp(e){const{onChangeValueText:t,format:n,allowValidation:a}=this.props,o=e.currentTarget,{innerText:r,nextSibling:s}=o;if(e.keyCode===f.keys.ENTER||e.keyCode===f.keys.ESC)return this.focused&&this.focused.blur(),void this.props.onSubmit(this.props.onToggle);const i=[f.keys.SHIFT,f.keys.ARROW_LEFT,f.keys.ARROW_RIGHT,f.keys.ARROW_UP,f.keys.ARROW_DOWN,f.keys.TAB];r.length>=f.getAttribute(o,"data-group").length&&!i.includes(e.keyCode)&&(a||!s?this.selectText(o):s instanceof HTMLSpanElement&&this.selectText(s),t(f.joinDates(this.searchInputs,n))),o.setAttribute("data-value",r)}onFocus(e){this.selectText(e.currentTarget)}onChange(e){const{format:t,onChangeValueText:n}=this.props,a=e.currentTarget,{innerText:o,nextSibling:r}=a;n(f.joinDates(this.searchInputs,t)),o.length>=f.getAttribute(a,"data-group").length&&r instanceof HTMLSpanElement&&r.focus()}onClear(e){e.stopPropagation(),this.props.onChangeValueText("")}onToggle(e){const{open:t,onToggle:n}=this.props;!1!==this.searchInputs.some(t=>t===e.target)&&t||n()}}a.__decorate([p.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype","function"==typeof(o=void 0!==m&&m.ReactNode)?o:Object)],S.prototype,"renderValue",null),a.__decorate([p.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(r="undefined"!=typeof HTMLSpanElement&&HTMLSpanElement)?r:Object]),a.__metadata("design:returntype",void 0)],S.prototype,"onSearchRef",null),a.__decorate([p.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(s=void 0!==m&&m.KeyboardEvent)?s:Object]),a.__metadata("design:returntype",void 0)],S.prototype,"onKeyDown",null),a.__decorate([p.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(i=void 0!==m&&m.KeyboardEvent)?i:Object]),a.__metadata("design:returntype",void 0)],S.prototype,"onKeyUp",null),a.__decorate([p.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(d=void 0!==m&&m.SyntheticEvent)?d:Object]),a.__metadata("design:returntype",void 0)],S.prototype,"onFocus",null),a.__decorate([p.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(l=void 0!==m&&m.KeyboardEvent)?l:Object]),a.__metadata("design:returntype",void 0)],S.prototype,"onChange",null),a.__decorate([p.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(c=void 0!==m&&m.SyntheticEvent)?c:Object]),a.__metadata("design:returntype",void 0)],S.prototype,"onClear",null),a.__decorate([p.bind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",["function"==typeof(u=void 0!==m&&m.SyntheticEvent)?u:Object]),a.__metadata("design:returntype",void 0)],S.prototype,"onToggle",null),n.Value=S},e.f[6]=function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},e.r(0)}($fsx);
//# sourceMappingURL=react-timebomb.min_quantum.js.map